var mathml=function(e){'use strict';var d=Math.max;function t(e){let t=k.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},k.set(e.type,t));let n=t.stringsArray.get(e.strings);if(void 0!==n)return n;const r=e.strings.join(u);return n=t.keyString.get(r),void 0===n&&(n=new f(e,e.getTemplateElement()),t.keyString.set(r,n)),t.stringsArray.set(e.strings,n),n}function n(e,t){const{element:{content:r},parts:n}=e,o=document.createTreeWalker(r,F,null,!1);let a=z(n),d=n[a],i=-1,l=0;const s=[];for(let r=null;o.nextNode();){i++;const e=o.currentNode;for(e.previousSibling===r&&(r=null),t.has(e)&&(s.push(e),null===r&&(r=e)),null!==r&&l++;void 0!==d&&d.index===i;)d.index=null===r?d.index-l:-1,a=z(n,a),d=n[a]}s.forEach(e=>e.parentNode.removeChild(e))}function r(e,t,n=null){const{element:{content:o},parts:r}=e;if(null===n||void 0===n)return void o.appendChild(t);const a=document.createTreeWalker(o,F,null,!1);let d=z(r),i=0,l=-1;for(;a.nextNode();){l++;const e=a.currentNode;for(e===n&&(i=I(t),n.parentNode.insertBefore(t,n));-1!==d&&r[d].index===l;){if(0<i){for(;-1!==d;)r[d].index+=i,d=z(r,d);return}d=z(r,d)}}}function o(e){return(t,n)=>void 0===n?ce(e,t):ue(e,t,n)}function a(e,t=[]){for(let n=0,r=e.length;n<r;n++){const r=e[n];Array.isArray(r)?a(r,t):t.push(r)}return t}const i=new WeakMap,l=e=>"function"==typeof e&&i.has(e),s=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,p=(e,t,n=null)=>{for(;t!==n;){const r=t.nextSibling;e.removeChild(t),t=r}},h={},c={},u=`{{lit-${(Math.random()+"").slice(2)}}}`,m=`<!--${u}-->`,g=new RegExp(`${u}|${m}`),y="$lit$";class f{constructor(e,t){this.parts=[],this.element=t;const r=[],o=[],a=document.createTreeWalker(t.content,133,null,!1);let d=0,l=-1,s=0;for(const{strings:n,values:{length:i}}=e;s<i;){const e=a.nextNode();if(null===e){a.currentNode=o.pop();continue}if(l++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:r}=t;let o=0;for(let e=0;e<r;e++)b(t[e].name,y)&&o++;for(;0<o--;){const t=n[s],r=P.exec(t)[2],o=r.toLowerCase()+y,a=e.getAttribute(o);e.removeAttribute(o);const d=a.split(g);this.parts.push({type:"attribute",index:l,name:r,strings:d}),s+=d.length-1}}"TEMPLATE"===e.tagName&&(o.push(e),a.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(0<=t.indexOf(u)){const n=e.parentNode,o=t.split(g),a=o.length-1;for(let t=0;t<a;t++){let r,a=o[t];if(""===a)r=S();else{const e=P.exec(a);null!==e&&b(e[2],y)&&(a=a.slice(0,e.index)+e[1]+e[2].slice(0,-y.length)+e[3]),r=document.createTextNode(a)}n.insertBefore(r,e),this.parts.push({type:"node",index:++l})}""===o[a]?(n.insertBefore(S(),e),r.push(e)):e.data=o[a],s+=a}}else if(8===e.nodeType)if(e.data===u){const t=e.parentNode;(null===e.previousSibling||l===d)&&(l++,t.insertBefore(S(),e)),d=l,this.parts.push({type:"node",index:l}),null===e.nextSibling?e.data="":(r.push(e),l--),s++}else for(let t=-1;-1!==(t=e.data.indexOf(u,t+1));)this.parts.push({type:"node",index:-1}),s++}for(const o of r)o.parentNode.removeChild(o)}}const b=(e,t)=>{const n=e.length-t.length;return 0<=n&&e.slice(n)===t},E=e=>-1!==e.index,S=()=>document.createComment(""),P=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class w{constructor(e,t,n){this.__parts=[],this.template=e,this.processor=t,this.options=n}update(e){let t=0;for(const n of this.__parts)void 0!==n&&n.setValue(e[t]),t++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const e=s?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],n=this.template.parts,r=document.createTreeWalker(e,133,null,!1);let o,a=0,d=0,i=r.nextNode();for(;a<n.length;){if(o=n[a],!E(o)){this.__parts.push(void 0),a++;continue}for(;d<o.index;)d++,"TEMPLATE"===i.nodeName&&(t.push(i),r.currentNode=i.content),null===(i=r.nextNode())&&(r.currentNode=t.pop(),i=r.nextNode());if("node"===o.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(i.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(i,o.name,o.strings,this.options));a++}return s&&(document.adoptNode(e),customElements.upgrade(e)),e}}class _{constructor(e,t,n,r){this.strings=e,this.values=t,this.type=n,this.processor=r}getHTML(){const e=this.strings.length-1;let t="",n=!1;for(let r=0;r<e;r++){const e=this.strings[r],o=e.lastIndexOf("<!--");n=(-1<o||n)&&-1===e.indexOf("-->",o+1);const a=P.exec(e);t+=null===a?e+(n?` ${u} `:m):e.substr(0,a.index)+a[1]+a[2]+y+a[3]+u}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");return e.innerHTML=this.getHTML(),e}}const M=e=>null===e||"object"!=typeof e&&"function"!=typeof e,x=e=>Array.isArray(e)||!!(e&&e[Symbol.iterator]);class C{constructor(e,t,n){this.dirty=!0,this.element=e,this.name=t,this.strings=n,this.parts=[];for(let r=0;r<n.length-1;r++)this.parts[r]=this._createPart()}_createPart(){return new N(this)}_getValue(){const e=this.strings,t=e.length-1;let n="";for(let r=0;r<t;r++){n+=e[r];const t=this.parts[r];if(void 0!==t){const e=t.value;if(M(e)||!x(e))n+="string"==typeof e?e:e+"";else for(const r of e)n+="string"==typeof r?r:r+""}}return n+=e[t],n}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class N{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===h||M(e)&&e===this.value||(this.value=e,!l(e)&&(this.committer.dirty=!0))}commit(){for(;l(this.value);){const e=this.value;this.value=h,e(this)}this.value===h||this.committer.commit()}}class R{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(S()),this.endNode=e.appendChild(S())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=S()),e.__insert(this.endNode=S())}insertAfterPart(e){e.__insert(this.startNode=S()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){for(;l(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=h,e(this)}const e=this.__pendingValue;e===h||(M(e)?e!==this.value&&this.__commitText(e):e instanceof _?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):x(e)?this.__commitIterable(e):e===c?(this.value=c,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value===e||(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling;e=null==e?"":e;const n="string"==typeof e?e:e+"";t===this.endNode.previousSibling&&3===t.nodeType?t.data=n:this.__commitNode(document.createTextNode(n)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof w&&this.value.template===t)this.value.update(e.values);else{const n=new w(t,e.processor,this.options),r=n._clone();n.update(e.values),this.__commitNode(r),this.value=n}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let n,r=0;for(const o of e)n=t[r],void 0===n&&(n=new R(this.options),t.push(n),0==r?n.appendIntoPart(this):n.insertAfterPart(t[r-1])),n.setValue(o),n.commit(),r++;r<t.length&&(t.length=r,this.clear(n&&n.endNode))}clear(e=this.startNode){p(this.startNode.parentNode,e.nextSibling,this.endNode)}}class T{constructor(e,t,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=n}setValue(e){this.__pendingValue=e}commit(){for(;l(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=h,e(this)}if(this.__pendingValue!==h){const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=h}}}class O extends C{constructor(e,t,n){super(e,t,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new A(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class A extends N{}let L=!1;try{const e={get capture(){return L=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}class j{constructor(e,t,n){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=n,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(e){this.__pendingValue=e}commit(){for(;l(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=h,e(this)}if(this.__pendingValue===h)return;const e=this.__pendingValue,t=this.value,n=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),null!=e&&(null==t||n)&&(this.__options=D(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=h}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const D=e=>e&&(L?{capture:e.capture,passive:e.passive,once:e.once}:e.capture);const q=new class{handleAttributeExpressions(e,t,n,r){const o=t[0];if("."===o){const r=new O(e,t.slice(1),n);return r.parts}if("@"===o)return[new j(e,t.slice(1),r.eventContext)];if("?"===o)return[new T(e,t.slice(1),n)];const a=new C(e,t,n);return a.parts}handleTextExpression(e){return new R(e)}},k=new Map,V=new WeakMap,B=(e,n,r)=>{let o=V.get(n);void 0===o&&(p(n,n.firstChild),V.set(n,o=new R(Object.assign({templateFactory:t},r))),o.appendInto(n)),o.setValue(e),o.commit()};(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.2");const U=(e,...t)=>new _(e,t,"html",q),F=133,I=e=>{let t=11===e.nodeType?0:1;for(const n=document.createTreeWalker(e,F,null,!1);n.nextNode();)t++;return t},z=(e,t=-1)=>{for(let n=t+1;n<e.length;n++){const t=e[n];if(E(t))return n}return-1},H=(e,t)=>`${e}--${t}`;let G=!0;"undefined"==typeof window.ShadyCSS?G=!1:"undefined"==typeof window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),G=!1);const W=e=>t=>{const n=H(t.type,e);let r=k.get(n);void 0===r&&(r={stringsArray:new WeakMap,keyString:new Map},k.set(n,r));let o=r.stringsArray.get(t.strings);if(void 0!==o)return o;const a=t.strings.join(u);if(o=r.keyString.get(a),void 0===o){const n=t.getTemplateElement();G&&window.ShadyCSS.prepareTemplateDom(n,e),o=new f(t,n),r.keyString.set(a,o)}return r.stringsArray.set(t.strings,o),o},$=["html","svg"],J=e=>{$.forEach(t=>{const r=k.get(H(t,e));void 0!==r&&r.keyString.forEach(e=>{const{element:{content:t}}=e,r=new Set;Array.from(t.querySelectorAll("style")).forEach(e=>{r.add(e)}),n(e,r)})})},X=new Set,Y=(e,t,o)=>{X.add(e);const a=o?o.element:document.createElement("template"),d=t.querySelectorAll("style"),{length:l}=d;if(0===l)return void window.ShadyCSS.prepareTemplateStyles(a,e);const s=document.createElement("style");for(let n=0;n<l;n++){const e=d[n];e.parentNode.removeChild(e),s.textContent+=e.textContent}J(e);const p=a.content;o?r(o,s,p.firstChild):p.insertBefore(s,p.firstChild),window.ShadyCSS.prepareTemplateStyles(a,e);const h=p.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==h)t.insertBefore(h.cloneNode(!0),t.firstChild);else if(!!o){p.insertBefore(s,p.firstChild);const e=new Set;e.add(s),n(o,e)}},Z=(e,t,n)=>{if(!n||"object"!=typeof n||!n.scopeName)throw new Error("The `scopeName` option is required.");const r=n.scopeName,o=V.has(t),a=G&&11===t.nodeType&&!!t.host,d=a&&!X.has(r),i=d?document.createDocumentFragment():t;if(B(e,i,Object.assign({templateFactory:W(r)},n)),d){const e=V.get(i);V.delete(i);const n=e.value instanceof w?e.value.template:void 0;Y(r,i,n),p(t,t.firstChild),t.appendChild(i),V.set(t,e)}!o&&a&&window.ShadyCSS.styleElement(t.host)};var Q;window.JSCompiler_renameProperty=e=>e;const v={toAttribute(e,t){return t===Boolean?e?"":null:t===Object||t===Array?null==e?e:JSON.stringify(e):e},fromAttribute(e,t){return t===Boolean?null!==e:t===Number?null===e?null:+e:t===Object||t===Array?JSON.parse(e):e}},K=(e,t)=>t!==e&&(t===t||e===e),ee={attribute:!0,type:String,converter:v,reflect:!1,hasChanged:K},te=Promise.resolve(!0),ne=1,re=4,oe=8,ae=16,de=32,ie="finalized";class le extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=te,this._hasConnectedResolver=void 0,this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const e=[];return this._classProperties.forEach((t,n)=>{const r=this._attributeNameForProperty(n,t);void 0!==r&&(this._attributeToPropertyMap.set(r,n),e.push(r))}),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;void 0!==e&&e.forEach((e,t)=>this._classProperties.set(t,e))}}static createProperty(e,t=ee){if(this._ensureClassProperties(),this._classProperties.set(e,t),t.noAccessor||this.prototype.hasOwnProperty(e))return;const n="symbol"==typeof e?Symbol():`__${e}`;Object.defineProperty(this.prototype,e,{get(){return this[n]},set(t){const r=this[e];this[n]=t,this._requestUpdate(e,r)},configurable:!0,enumerable:!0})}static finalize(){const e=Object.getPrototypeOf(this);if(e.hasOwnProperty(ie)||e.finalize(),this[ie]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...("function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[])];for(const n of t)this.createProperty(n,e[n])}}static _attributeNameForProperty(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}static _valueHasChanged(e,t,n=K){return n(e,t)}static _propertyValueFromAttribute(e,t){const n=t.type,r=t.converter||v,o="function"==typeof r?r:r.fromAttribute;return o?o(e,n):e}static _propertyValueToAttribute(e,t){if(void 0===t.reflect)return;const n=t.type,r=t.converter,o=r&&r.toAttribute||v.toAttribute;return o(e,n)}initialize(){this._saveInstanceProperties(),this._requestUpdate()}_saveInstanceProperties(){this.constructor._classProperties.forEach((e,t)=>{if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(t,e)}})}_applyInstanceProperties(){this._instanceProperties.forEach((e,t)=>this[t]=e),this._instanceProperties=void 0}connectedCallback(){this._updateState|=de,this._hasConnectedResolver&&(this._hasConnectedResolver(),this._hasConnectedResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(e,t,n){t!==n&&this._attributeToProperty(e,n)}_propertyToAttribute(e,t,n=ee){const r=this.constructor,o=r._attributeNameForProperty(e,n);if(void 0!==o){const e=r._propertyValueToAttribute(t,n);if(void 0===e)return;this._updateState|=oe,null==e?this.removeAttribute(o):this.setAttribute(o,e),this._updateState&=~oe}}_attributeToProperty(e,t){if(this._updateState&oe)return;const n=this.constructor,r=n._attributeToPropertyMap.get(e);if(void 0!==r){const e=n._classProperties.get(r)||ee;this._updateState|=ae,this[r]=n._propertyValueFromAttribute(t,e),this._updateState&=~ae}}_requestUpdate(e,t){let n=!0;if(void 0!==e){const r=this.constructor,o=r._classProperties.get(e)||ee;r._valueHasChanged(this[e],t,o.hasChanged)?(!this._changedProperties.has(e)&&this._changedProperties.set(e,t),!0===o.reflect&&!(this._updateState&ae)&&(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,o))):n=!1}!this._hasRequestedUpdate&&n&&this._enqueueUpdate()}requestUpdate(e,t){return this._requestUpdate(e,t),this.updateComplete}async _enqueueUpdate(){this._updateState|=re;let e,t;const n=this._updatePromise;this._updatePromise=new Promise((n,r)=>{e=n,t=r});try{await n}catch(t){}this._hasConnected||(await new Promise(e=>this._hasConnectedResolver=e));try{const e=this.performUpdate();null!=e&&(await e)}catch(n){t(n)}e(!this._hasRequestedUpdate)}get _hasConnected(){return this._updateState&de}get _hasRequestedUpdate(){return this._updateState&re}get hasUpdated(){return this._updateState&ne}performUpdate(){this._instanceProperties&&this._applyInstanceProperties();let t=!1;const n=this._changedProperties;try{t=this.shouldUpdate(n),t&&this.update(n)}catch(n){throw t=!1,n}finally{this._markUpdated()}t&&(!(this._updateState&ne)&&(this._updateState|=ne,this.firstUpdated(n)),this.updated(n))}_markUpdated(){this._changedProperties=new Map,this._updateState&=~re}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(e){return!0}update(e){void 0!==this._reflectingProperties&&0<this._reflectingProperties.size&&(this._reflectingProperties.forEach((e,t)=>this._propertyToAttribute(t,this[t],e)),this._reflectingProperties=void 0)}updated(e){}firstUpdated(e){}}Q=ie,le[Q]=!0;const se=(e,t)=>(window.customElements.define(e,t),t),pe=(e,t)=>{const{kind:n,elements:r}=t;return{kind:n,elements:r,finisher(t){window.customElements.define(e,t)}}},he=e=>t=>"function"==typeof t?se(e,t):pe(e,t),ce=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?Object.assign({},t,{finisher(n){n.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(n){n.createProperty(t.key,e)}},ue=(e,t,n)=>{t.constructor.createProperty(n,e)},me="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype;(window.litElementVersions||(window.litElementVersions=[])).push("2.2.1");const ge=e=>e.flat?e.flat(1/0):a(e);class ye extends le{static finalize(){super.finalize.call(this),this._styles=this.hasOwnProperty(JSCompiler_renameProperty("styles",this))?this._getUniqueStyles():this._styles||[]}static _getUniqueStyles(){const e=this.styles,t=[];if(Array.isArray(e)){const n=ge(e),r=n.reduceRight((e,t)=>(e.add(t),e),new Set);r.forEach(e=>t.unshift(e))}else e&&t.push(e);return t}initialize(){super.initialize(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const e=this.constructor._styles;0===e.length||(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?me?this.renderRoot.adoptedStyleSheets=e.map(e=>e.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map(e=>e.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(e){super.update(e);const t=this.render();t instanceof _&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)}))}render(){}}ye.finalized=!0,ye.render=Z;var fe=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},be=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class Ee extends ye{updated(e){e.has("mathcolor")&&this.style.setProperty("--math-color",this.mathcolor||null),e.has("mathbackground")&&this.style.setProperty("--math-background",this.mathbackground||null)}}fe([o({type:String}),be("design:type",String)],Ee.prototype,"mathbackground",void 0),fe([o({type:String}),be("design:type",String)],Ee.prototype,"mathcolor",void 0);e.MathElement=class extends Ee{render(){return U`
    <style>
      :host {
        display: inline-block;
        font-size: inherit;
        font-style: normal;
        font-family: serif;
        line-height: 1.5;
        word-spacing: normal;
        letter-spacing: normal;
        text-rendering: optimizeLegibility;
        direction: ltr;
        unicode-bidi: embed;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
    </style>
    <slot></slot>
    `}},e.MathElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-ml")],e.MathElement);const Se=`.layout.vertical {
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -ms-flex-direction: column;
  -webkit-flex-direction: column;
  flex-direction: column;
}`,Pe=`.flex {
  -ms-flex: 1 1 0.000000001px;
  -webkit-flex: 1;
  flex: 1;
  -webkit-flex-basis: 0.000000001px;
  flex-basis: 0.000000001px;
}`,we=`.center {
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}`,_e=U`
  ${Se}
  ${".layout.horizontal {\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: flex;\n  -ms-flex-direction: row;\n  -webkit-flex-direction: row;\n  flex-direction: row;\n}"}
  ${Pe}
  ${we}
`,ve=U`
  ${Se}
  ${Pe}
`,Me=U`
  ${".layout.horizontal {\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: flex;\n  -ms-flex-direction: row;\n  -webkit-flex-direction: row;\n  flex-direction: row;\n}"}
  ${Pe}
`,xe=U`
  ${".layout.horizontal {\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: flex;\n  -ms-flex-direction: row;\n  -webkit-flex-direction: row;\n  flex-direction: row;\n}"}
  ${Pe}
  ${we}
`;e.MathRowElement=class extends Ee{render(){return U`
    <style>
      ${Me}
      :host {
        display: inline-block;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      .layout.horizontal {
        align-items: baseline;
      }
      .layout.horizontal.centered {
        align-items: center;
      }
      .layout.horizontal.justified {
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
      }
    </style>
    <div id="mrowPanel" class="horizontal layout"><slot @slotchange="${this.onSlotChange}"></slot></div>
    `}onSlotChange(){if(!this.shadowRoot)return;const e=this.shadowRoot.querySelector("slot"),t=this.shadowRoot.querySelector("#mrowPanel");if(!e||!t)return;t.classList.remove("centered");const n=e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE);let r=0,o=0,a=!1;for(let e=0;e<n.length;e++){const t=(n[e].textContent||"").trim();if("="===t){a=!0;break}const d=n[e].tagName.toLowerCase();switch(d){case"math-underover":case"math-under":case"math-over":case"math-subsup":o++;break;case"math-o":r++;break;case"math-table":a=!0;break;default:}}a||!o||r||(a=!0),a&&t.classList.add("centered"),t.classList.remove("justified"),("center"===(getComputedStyle(this).getPropertyValue("--math-underover-align")||"").trim()||"center"===(getComputedStyle(this).getPropertyValue("--math-under-align")||"").trim()||"center"===(getComputedStyle(this).getPropertyValue("--math-over-align")||"").trim())&&t.classList.add("justified")}},e.MathRowElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-row")],e.MathRowElement);e.MathNElement=class extends Ee{render(){return U`
    <style>
      :host {
        display: inline-block;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
    </style>
    <slot></slot>
    `}},e.MathNElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-n")],e.MathNElement);var Ce=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},Ne=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathOElement=class extends Ee{constructor(){super(...arguments),this.formStyle=""}render(){return U`
    <style>
      :host {
        display: -ms-inline-flexbox;
        display: -webkit-inline-flex;
        display: inline-flex;
        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
        position: relative;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      :host(.mo-infix) {
        margin: 0 0.2em;
      }
      :host(.mo-separator) {
        margin: 0 0.2em 0 0;
      }
      :host(.mo-product) {
        margin: 0;
      }
      :host(.mo-begin-brace) {
        margin: 0 0.05em 0 0.2em;
      }
      :host(.mo-end-brace) {
        margin: 0 0.2em 0 0.05em;
      }
      :host(.mo-neut-brace) {
        margin: 0 0.16em;
      }
      :host(.mo-stretchy) {
        align-self: stretch;
      }
      :host(.mo-bigger) {
        line-height: 1.1;
        font-size: 1.8em;
      }
      .invisible {
        opacity: 0;
      }
      .fullWidthSpan {
        width: 100%;
        box-sizing: border-box;
        text-align: center;
      }
    </style>
    <span class="invisible"><slot @slotchange="${this.onSlotChange}"></slot></span>
    `}updated(e){super.updated(e),this.onSlotChange()}onSlotChange(){if(!this.shadowRoot)return;const e=this.shadowRoot.querySelector("span");if(!e)return;let t="";const n=(this.textContent||"").trim();","===n||";"===n?t="separator":"."===n||"\u22C5"===n?t="product":n.match(/^[\[{(]*$/)?t="begin-brace":n.match(/^[\]})]*$/)?t="end-brace":n.match(/^[|]*$/)&&(t="neut-brace"),this.classList.remove("mo-bigger"),n&&8704<=n.charCodeAt(0)&&8755>=n.charCodeAt(0)&&"sub"!==(getComputedStyle(this).getPropertyValue("--math-style-level")||"").trim()&&this.classList.add("mo-bigger");const r=t||"infix";this.formStyle!==r&&(this.formStyle&&this.classList.remove(this.formStyle),this.formStyle=`mo-${r}`,this.classList.add(this.formStyle));let o=this.stretchy&&"true"===this.stretchy.trim().toLowerCase();this.stretchy||("true"===getComputedStyle(this).getPropertyValue("--math-style-stretchy").trim()?o=!0:o="begin-brace"==t||"end-brace"==t||"neut-brace"==t),e.style.width=null,o?(e.classList.remove("fullWidthSpan"),this.classList.add("mo-stretchy"),e.style.lineHeight="1",setTimeout(()=>{if(e.style.transform)return;e.classList.remove("invisible");const t=e.getBoundingClientRect(),n=this.getBoundingClientRect(),r=t.height?n.height/t.height:1,o=t.width?n.width/t.width:1;1>=r&&(e.style.lineHeight=null),1!==o&&(e.style.width="100%"),e.style.transform=`scale(${o}, ${r})`},50)):(e.classList.add("fullWidthSpan"),this.classList.remove("mo-stretchy"),e.style.transform=null,e.style.lineHeight=null,e.classList.remove("invisible"))}},Ce([o({type:String}),Ne("design:type",String)],e.MathOElement.prototype,"form",void 0),Ce([o({type:String}),Ne("design:type",String)],e.MathOElement.prototype,"stretchy",void 0),e.MathOElement=Ce([he("math-o")],e.MathOElement);e.MathIElement=class extends Ee{render(){return U`
    <style>
      :host {
        display: inline-block;
        font-style: italic;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
    </style>
    <slot></slot>
    `}},e.MathIElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-i")],e.MathIElement);var Re=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},Te=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathSElement=class extends Ee{render(){return U`
    <style>
      :host {
        display: inline-block;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      :host:before {
        content: "\\0022";
        margin-right: -0.2em;
      }
      :host:after {
        content: "\\0022";
        margin-left: -0.2em;
      }
      :host([lquote]):before {
        content: attr(lquote)
      }
      :host([rquote]):after {
        content: attr(rquote)
      }
    </style>
    <slot></slot>
    `}},Re([o({type:String,reflect:!0}),Te("design:type",String)],e.MathSElement.prototype,"lquote",void 0),Re([o({type:String,reflect:!0}),Te("design:type",String)],e.MathSElement.prototype,"rquote",void 0),e.MathSElement=Re([he("math-s")],e.MathSElement);var Oe=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},Ae=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathSpaceElement=class extends Ee{constructor(){super(...arguments),this.width="0em",this.height="0ex",this.depth="0ex"}render(){return U`
    <style>
      :host {
        display: inline-block;
        vertical-align: top;
        background: var(--math-background, inherit);
      }
    </style>
    `}updated(e){super.updated(e),this.style.width=this.width,this.style.height=this.height,this.style.marginBottom=this.depth}},Oe([o({type:String}),Ae("design:type",Object)],e.MathSpaceElement.prototype,"width",void 0),Oe([o({type:String}),Ae("design:type",Object)],e.MathSpaceElement.prototype,"height",void 0),Oe([o({type:String}),Ae("design:type",Object)],e.MathSpaceElement.prototype,"depth",void 0),e.MathSpaceElement=Oe([he("math-space")],e.MathSpaceElement);e.MathTextElement=class extends Ee{render(){return U`
    <style>
      :host {
        display: inline-block;
        white-space: nowrap;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
    </style>
    <slot></slot>
    `}},e.MathTextElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-text")],e.MathTextElement);var Le=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},je=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathGlyphElement=class extends Ee{constructor(){super(...arguments),this.width="auto",this.height="auto",this.valign="auto",this.alt=""}render(){const e=this.valign?0===this.valign.indexOf("-")?this.valign.substring(1):`-${this.valign}`:"0",t=this.src?`width: ${this.width||"auto"}; height: ${this.height||"auto"}; transform: translate3d(0,${e},0);`:"display: none;";return U`
    <style>
      :host {
        display: inline-block;
        background: var(--math-background, inherit);
      }
      img {
        display: block;
      }
    </style>
    <img src="${this.src||""}" alt="${this.alt}" style="${t}">
    `}},Le([o({type:String}),je("design:type",String)],e.MathGlyphElement.prototype,"src",void 0),Le([o({type:String}),je("design:type",Object)],e.MathGlyphElement.prototype,"width",void 0),Le([o({type:String}),je("design:type",Object)],e.MathGlyphElement.prototype,"height",void 0),Le([o({type:String}),je("design:type",Object)],e.MathGlyphElement.prototype,"valign",void 0),Le([o({type:String}),je("design:type",Object)],e.MathGlyphElement.prototype,"alt",void 0),e.MathGlyphElement=Le([he("math-glyph")],e.MathGlyphElement);var De=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},qe=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class ke extends Ee{updateAlignment(){const e=this.style;if(this.columnalign)switch(this.columnalign){case"left":e.setProperty("--math-ml-columnalign","left");break;case"right":e.setProperty("--math-ml-columnalign","right");break;default:case"center":e.setProperty("--math-ml-columnalign","center");}if(this.rowalign)switch(this.rowalign){case"baseline":e.setProperty("--math-ml-rowalign","baseline");break;case"bottom":e.setProperty("--math-ml-rowalign","bottom");break;case"axis":case"center":e.setProperty("--math-ml-rowalign","middle");break;case"top":e.setProperty("--math-ml-rowalign","top");break;default:e.removeProperty("--math-ml-rowalign");}}}De([o({type:String}),qe("design:type",String)],ke.prototype,"columnalign",void 0),De([o({type:String}),qe("design:type",String)],ke.prototype,"rowalign",void 0);e.MathTDElement=class extends ke{render(){return U`
    <style>
      :host {
        display: table-cell;
        text-align: var(--math-ml-columnalign);
        vertical-align: var(--math-ml-rowalign);
        padding-left: var(--math-table-columnspacing);
        padding-right: var(--math-table-columnspacing);
        padding-top: var(--math-table-rowspacing);
        padding-bottom: var(--math-table-rowspacing);
        padding-left: calc(var(--math-table-columnspacing)/2);
        padding-right: calc(var(--math-table-columnspacing)/2);
        padding-top: calc(var(--math-table-rowspacing)/2);
        padding-bottom: calc(var(--math-table-rowspacing)/2);
        border-bottom: var(--math-table-row-border);
        border-right: var(--math-table-column-border);
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
    </style>
    <slot></slot>
    `}updated(e){super.updated(e),this.updateAlignment()}},e.MathTDElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-td")],e.MathTDElement);e.MathTRElement=class extends ke{render(){return U`
    <style>
      :host {
        display: table-row;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      slot::slotted(math-td:last-child) {
        --math-table-column-border: none;
      }
    </style>
    <slot @slotchange="${this.refreshSlot}"></slot>
    `}updated(e){super.updated(e),this.updateAlignment(),this.refreshSlot()}refreshSlot(){if(this.shadowRoot){const e=this.shadowRoot.querySelector("slot");if(e&&this.columnalign){const t=this.columnalign.trim().split(" ").filter(e=>!!e.trim());if(1<t.length){const n=e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE).filter(e=>"MATH-TD"===e.tagName);for(let e=0;e<t.length&&!(e>=n.length);e++)n[e].columnalign=t[e]}}}}},e.MathTRElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-tr")],e.MathTRElement);e.MathLabeledTRElement=class extends ke{render(){return U`
    <style>
      :host {
        display: table-row;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      slot::slotted(math-td:first-child) {
        display: none;
      }
      slot::slotted(math-td:last-child) {
        --math-table-column-border: none;
      }
    </style>
    <slot></slot>
    `}updated(e){super.updated(e),this.updateAlignment()}},e.MathLabeledTRElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-labeledtr")],e.MathLabeledTRElement);var Ve=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},Be=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathTableElement=class extends ke{constructor(){super(),this.columnlines="none",this.rowlines="none",this.frame="none",this.columnspacing="0.8em",this.rowspacing="0.8em",this.framespacing="0.4em 0.5ex",this.columnalign=this.columnalign||"center"}render(){return U`
    <style>
      :host {
        display: inline-table;
        border: var(--math-table-border, 'none');
        padding: var(--math-table-padding, 0.5ex 0.4em);
        width: var(--math-table-width);
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      slot::slotted(math-tr:last-child) {
        --math-table-row-border: none;
      }
    </style>
    <slot></slot>
    `}updated(e){super.updated(e),this.updateAlignment();const t=this.style;if(this.frame)switch(this.frame){case"none":t.setProperty("--math-table-border","none");break;case"solid":t.setProperty("--math-table-border","solid thin");break;case"dashed":t.setProperty("--math-table-border","dashed thin");break;default:t.removeProperty("--math-table-border");}if(this.rowlines)switch(this.rowlines){case"none":t.setProperty("--math-table-row-border","none");break;case"solid":t.setProperty("--math-table-row-border","solid thin");break;case"dashed":t.setProperty("--math-table-row-border","dashed thin");break;default:t.removeProperty("--math-table-row-border");}if(this.columnlines)switch(this.columnlines){case"none":t.setProperty("--math-table-column-border","none");break;case"solid":t.setProperty("--math-table-column-border","solid thin");break;case"dashed":t.setProperty("--math-table-column-border","dashed thin");break;default:t.removeProperty("--math-table-column-border");}if(this.framespacing){const e=this.framespacing.split(" ").reverse();t.setProperty("--math-table-padding",e.join(" "))}else t.removeProperty("--math-table-padding");if(this.width?t.setProperty("--math-table-width",this.width):t.removeProperty("--math-table-width"),this.columnspacing?t.setProperty("--math-table-columnspacing",this.columnspacing):t.removeProperty("--math-table-columnspacing"),this.rowspacing?t.setProperty("--math-table-rowspacing",this.columnspacing):t.removeProperty("--math-table-rowspacing"),this.columnalign){const e=this.columnalign.trim().split(" ").filter(e=>!!e.trim());if(1<e.length){const e=this.shadowRoot.querySelector("slot");e&&e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE).filter(e=>"MATH-TR"===e.tagName||"MATH-LABELEDTR"===e.tagName).forEach(e=>{const t=e;t.columnalign=t.columnalign||this.columnalign.trim()})}}}},Ve([o({type:String}),Be("design:type",String)],e.MathTableElement.prototype,"columnlines",void 0),Ve([o({type:String}),Be("design:type",String)],e.MathTableElement.prototype,"rowlines",void 0),Ve([o({type:String}),Be("design:type",String)],e.MathTableElement.prototype,"frame",void 0),Ve([o({type:String}),Be("design:type",Object)],e.MathTableElement.prototype,"columnspacing",void 0),Ve([o({type:String}),Be("design:type",Object)],e.MathTableElement.prototype,"rowspacing",void 0),Ve([o({type:String}),Be("design:type",Object)],e.MathTableElement.prototype,"framespacing",void 0),Ve([o({type:String}),Be("design:type",String)],e.MathTableElement.prototype,"width",void 0),e.MathTableElement=Ve([he("math-table"),Be("design:paramtypes",[])],e.MathTableElement);e.MathSupElement=class extends Ee{render(){return U`
    <style>
      ${Me}
      :host {
        display: inline-block;
        position: relative;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      ::slotted(:first-child) {
        padding-right: 0.16em;
      }
      ::slotted(:not(:first-child)) {
        font-size: 0.8em;
        --math-style-level: sub;
        position: absolute;
        left: 100%;
        opacity: 0;
        line-height: 1;
      }
    </style>
    <div class="horizontal layout">
      <slot @slotchange="${this.refreshSlot}"></slot>
    </div>
    `}refreshSlot(){if(!this.shadowRoot)return;const e=this.shadowRoot.querySelector("slot");if(!e)return;const t=e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE);1<t.length&&setTimeout(()=>{const e=t[0].getBoundingClientRect(),n=t[1],r=n.getBoundingClientRect();n.style.opacity="1";const o=[0,0],a=r.bottom-(e.bottom-e.height/2);0<a&&(n.style.top=`${-a}px`,o[0]=a),o[1]=r.width+5,this.style.margin=`${o[0]}px ${o[1]}px 0 0`},50)}},e.MathSupElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-sup")],e.MathSupElement);e.MathSubElement=class extends Ee{render(){return U`
    <style>
      ${Me}
      :host {
        display: inline-block;
        position: relative;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      ::slotted(:first-child) {
        padding-right: 0.1em;
        margin: 0;
      }
      ::slotted(:not(:first-child)) {
        font-size: 0.8em;
        --math-style-level: sub;
        position: absolute;
        left: 100%;
        opacity: 0;
        line-height: 1;
      }
    </style>
    <div class="horizontal layout">
      <slot @slotchange="${this.refreshSlot}"></slot>
    </div>
    `}refreshSlot(){if(!this.shadowRoot)return;const e=this.shadowRoot.querySelector("slot");if(!e)return;const t=e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE);1<t.length&&setTimeout(()=>{const e=t[0].getBoundingClientRect(),n=t[1],r=n.getBoundingClientRect();n.style.opacity="1";const o=[0,0],a=e.height/2;let d=a;a+r.height<e.height?d=e.height-r.height:o[0]=a+r.height-e.height,n.style.top=`${d}px`,o[1]=r.width+5,this.style.margin=`0 ${o[1]}px ${o[0]}px 0`},50)}},e.MathSubElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-sub")],e.MathSubElement);e.MathSubSupElement=class extends Ee{constructor(){super(...arguments),this.pendingLayout=!1}render(){return U`
    <style>
      ${Me}
      :host {
        display: inline-block;
        position: relative;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      ::slotted(:first-child) {
        padding-right: 0.16em;
      }
      ::slotted(:not(:first-child)) {
        font-size: 0.75em;
        --math-style-level: sub;
        position: absolute;
        left: 100%;
        opacity: 0;
        line-height: 1;
      }
    </style>
    <div class="horizontal layout">
      <slot @slotchange="${this.refreshSlot}"></slot>
    </div>
    `}refreshSlot(){if(this.pendingLayout)return;if(!this.shadowRoot)return;const e=this.shadowRoot.querySelector("slot");if(!e)return;const t=e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE);if(2<t.length){this.pendingLayout=!0;const e=()=>{const e=t[0].getBoundingClientRect(),n=t[1],r=t[2],o=n.getBoundingClientRect(),a=r.getBoundingClientRect();n.style.opacity="1",r.style.opacity="1";const i=[0,0,0],l=e.height/2;let s=l;l+o.height<e.height?s=e.height-o.height:i[2]=l+o.height-e.height,n.style.top=`${s}px`,i[1]=o.width+5,s=a.bottom-(e.bottom-e.height/2),0<s&&(r.style.top=`${-s}px`,i[0]=s),i[1]=d(a.width+5,i[1]),this.style.margin=`${i[0]}px ${i[1]}px ${i[2]}px 0`};setTimeout(e,50),setTimeout(()=>{this.pendingLayout=!1,e()},500)}}},e.MathSubSupElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-subsup")],e.MathSubSupElement);e.MathMultiScriptsElement=class extends Ee{constructor(){super(...arguments),this.pendingLayout=!1}render(){return U`
    <style>
      ${_e}
      :host {
        display: inline-block;
        position: relative;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      ::slotted(:first-child) {
        padding: 0 0.16em;
      }
      ::slotted(:not(:first-child)) {
        font-size: 0.75em;
        --math-style-level: sub;
        position: absolute;
        opacity: 0;
        line-height: 1;
      }
      ::slotted(.rightscript) {
        left: 100%;
      }
      ::slotted(.leftscript) {
        right: 100%;
      }
    </style>
    <div class="horizontal layout">
      <slot @slotchange="${this.refreshSlot}"></slot>
    </div>
    `}refreshSlot(){if(this.pendingLayout)return;if(!this.shadowRoot)return;const e=this.shadowRoot.querySelector("slot");if(!e)return;const t=e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE);if((1!==t.length||t[0].tagName!=="math-prescripts".toUpperCase())&&2<t.length){this.pendingLayout=!0;const e=()=>{const e=[null,null],r=[null,null];let o=e;for(let e=1;e<t.length;e++){const a=t[e];a.tagName==="math-prescripts".toUpperCase()?o=r:o[0]?!o[1]&&(o[1]=a):o[0]=a}const a=t[0].getBoundingClientRect(),n=[0,0,0,0];{if(e[0]){const t=e[0],r=t.getBoundingClientRect();t.style.opacity="1",t.classList.add("rightscript");const o=a.height/2;let d=o;o+r.height<a.height?d=a.height-r.height:n[2]=o+r.height-a.height,t.style.top=`${d}px`,n[1]=r.width+5}if(e[1]){const t=e[1];t.style.opacity="1",t.classList.add("rightscript");const r=t.getBoundingClientRect(),o=r.bottom-(a.bottom-a.height/2);0<o&&(t.style.top=`${-o}px`,n[0]=o),n[1]=d(r.width+5,n[1])}}{if(r[0]){const e=r[0],t=e.getBoundingClientRect();e.style.opacity="1",e.classList.add("leftscript");const o=a.height/2;let i=o;o+t.height<a.height?i=a.height-t.height:n[2]=d(o+t.height-a.height,n[2]),e.style.top=`${i}px`,n[3]=d(t.width+5,n[3])}if(r[1]){const e=r[1];e.style.opacity="1",e.classList.add("leftscript");const t=e.getBoundingClientRect(),o=t.bottom-(a.bottom-a.height/2);0<o&&(e.style.top=`${-o}px`,n[0]=d(o,n[0])),n[3]=d(t.width+5,n[3])}}this.style.margin=`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px`};setTimeout(e,100),setTimeout(()=>{this.pendingLayout=!1,e()},800)}}},e.MathMultiScriptsElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-multiscripts")],e.MathMultiScriptsElement);e.MathPreScriptsElement=class extends Ee{render(){return U`
    <style>
      :host {
        width: 0;
        height: 0;
        display: none;
      }
    </style>
    `}},e.MathPreScriptsElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-prescripts")],e.MathPreScriptsElement);e.MathNoneElement=class extends Ee{render(){return U`
    <style>
      :host {
        height: 0;
        width: 0;
        padding: 0 3px;
      }
    </style>
    `}},e.MathNoneElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-none")],e.MathNoneElement);var Ue=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},Fe=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathOverElement=class extends Ee{constructor(){super(...arguments),this.accent=!1,this.align="center"}render(){return U`
    <style>
      ${ve}
      :host {
        display: inline-block;
        margin: 0 0.16em;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      .vertical.layout.reverse {
        -ms-flex-direction: column-reverse;
        -webkit-flex-direction: column-reverse;
        flex-direction: column-reverse;
      }
      ::slotted(:not(:first-child)) {
        width: 100%;
        line-height: 1;
        margin: 0;
        text-align: var(--math-over-align, center);
        --math-style-level: sub;
        font-size: var(--math-over-font-size, 0.8em);
        --math-style-stretchy: true;
      }
    </style>
    <div class="vertical layout reverse">
      <slot></slot>
    </div>
    `}updated(e){super.updated(e);const t=this.style;switch(this.align){case"right":t.setProperty("--math-over-align","right");break;case"left":t.setProperty("--math-over-align","left");break;default:t.setProperty("--math-over-align","center");}t.setProperty("--math-over-font-size",this.accent?"1em":"0.8em")}},Ue([o({type:Boolean,reflect:!0}),Fe("design:type",Object)],e.MathOverElement.prototype,"accent",void 0),Ue([o(),Fe("design:type",String)],e.MathOverElement.prototype,"align",void 0),e.MathOverElement=Ue([he("math-over")],e.MathOverElement);var Ie=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},ze=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathUnderElement=class extends Ee{constructor(){super(...arguments),this.accentunder=!1,this.align="center"}render(){return U`
    <style>
      ${ve}
      :host {
        display: inline-block;
        margin: 0 0.16em;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      ::slotted(:not(:first-child)) {
        width: 100%;
        line-height: 1;
        margin: 0;
        text-align: var(--math-under-align, center);
        --math-style-level: sub;
        font-size: var(--math-under-font-size, 0.8em);
        --math-style-stretchy: true;
      }
    </style>
    <div class="vertical layout">
      <slot></slot>
    </div>
    `}updated(e){super.updated(e);const t=this.style;switch(this.align){case"right":t.setProperty("--math-under-align","right");break;case"left":t.setProperty("--math-under-align","left");break;default:t.setProperty("--math-under-align","center");}t.setProperty("--math-under-font-size",this.accentunder?"1em":"0.8em")}},Ie([o({type:Boolean,reflect:!0}),ze("design:type",Object)],e.MathUnderElement.prototype,"accentunder",void 0),Ie([o(),ze("design:type",String)],e.MathUnderElement.prototype,"align",void 0),e.MathUnderElement=Ie([he("math-under")],e.MathUnderElement);var He=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},Ge=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathUnderOverElement=class extends Ee{constructor(){super(...arguments),this.accent=!1,this.accentunder=!1,this.align="center"}render(){return U`
    <style>
      ${ve}
      :host {
        display: inline-block;
        margin: 0 0.16em;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      .vertical.layout.reverse {
        -ms-flex-direction: column-reverse;
        -webkit-flex-direction: column-reverse;
        flex-direction: column-reverse;
      }
      .under {
        width: 100%;
        line-height: 1;
        margin: 0;
        text-align: var(--math-underover-align, center);
        --math-style-level: sub;
        font-size: var(--math-under-font-size, 0.75em);
        --math-style-stretchy: true;
      }
      .over {
        width: 100%;
        line-height: 1;
        margin: 0;
        text-align: var(--math-underover-align, center);
        --math-style-level: sub;
        font-size: var(--math-over-font-size, 0.75em);
        --math-style-stretchy: true;
      }
      .base {
        margin: 0;
      }
    </style>
    <div id="muoPanel" class="vertical layout"></div>
    <div style="display: hidden;">
      <slot @slotchange="${this.refreshSlot}"></slot>
    </div>
    `}updated(e){super.updated(e);const t=this.style;switch(this.align){case"right":t.setProperty("--math-underover-align","right");break;case"left":t.setProperty("--math-underover-align","left");break;default:t.setProperty("--math-underover-align","center");}t.setProperty("--math-under-font-size",this.accentunder?"1em":"0.75em"),t.setProperty("--math-over-font-size",this.accent?"1em":"0.75em"),this.refreshSlot()}refreshSlot(){if(this.shadowRoot){const e=this.shadowRoot.querySelector("slot");if(e){const t=e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE);if(t.length){const e=this.shadowRoot.querySelector("#muoPanel");for(;e.firstChild;)e.removeChild(e.firstChild);2<t.length&&(t[2].classList.add("over"),e.appendChild(t[2])),t[0].classList.add("base"),e.append(t[0]),1<t.length&&(t[1].classList.add("under"),e.appendChild(t[1]))}}}}},He([o({type:Boolean,reflect:!0}),Ge("design:type",Object)],e.MathUnderOverElement.prototype,"accent",void 0),He([o({type:Boolean,reflect:!0}),Ge("design:type",Object)],e.MathUnderOverElement.prototype,"accentunder",void 0),He([o(),Ge("design:type",String)],e.MathUnderOverElement.prototype,"align",void 0),e.MathUnderOverElement=He([he("math-underover")],e.MathUnderOverElement);e.MathSqrtElement=class extends Ee{render(){return U`
    <style>
      ${Me}
      :host {
        display: inline-block;
        vertical-align: bottom;
        align-self: center;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      .msqrtContent {
        padding: 1px 0.05em 0 0.2em;
        border-top: solid thin;
        white-space: nowrap;
      }
      #msqrtGlyphSpan {
        width: 1.1em;
        position: relative;
      }
      svg {
        position: absolute;
        left: 0;
        right: 0;
        width: 100%;
        height: 100%;
      }
      path {
        fill: none;
        stroke: currentColor;
        stroke-width: 1;
      }
    </style>
    <div class="horizontal layout">
      <div id="msqrtGlyphSpan"><svg><path id="rootPath"></path></svg></div>
      <div class="flex msqrtContent"><slot @slotchange="${this.onSlotCange}"></slot></div>
    </div>
    `}updated(e){super.updated(e),this.onSlotCange()}onSlotCange(){if(this.shadowRoot){const e=this.shadowRoot.querySelector("slot");e&&setTimeout(()=>{this.drawRoot()},10)}}drawRoot(){const e=this.shadowRoot.querySelector("#msqrtGlyphSpan"),t=this.shadowRoot.querySelector("#rootPath");if(e&&t){const n=e.getBoundingClientRect(),r=n.width,o=n.height;t.setAttribute("d",`M0 ${.55*o} H${.13*r} L${.45*r} ${o-2} L${r} 0`)}}},e.MathSqrtElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-sqrt")],e.MathSqrtElement);e.MathRootElement=class extends Ee{render(){return U`
    <style>
      ${Me}
      :host {
        display: inline-block;
        vertical-align: bottom;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      .msqrtContent {
        padding: 1px 0.05em 0 0.2em;
        border-top: solid thin;
        white-space: nowrap;
      }
      #msqrtGlyphSpan {
        width: 1.1em;
        position: relative;
      }
      svg {
        position: absolute;
        left: 0;
        right: 0;
        width: 100%;
        height: 100%;
      }
      path {
        fill: none;
        stroke: currentColor;
        stroke-width: 1;
      }
      ::slotted(:not(:first-child)) {
        font-size: 0.66em;
        position: absolute;
        top: 52%;
        right: 57%;
        transform: translate3d(-100%,-100%,0);
      }
    </style>
    <div class="horizontal layout" style="position: relative;">
      <div id="msqrtGlyphSpan"><svg><path id="rootPath"></path></svg></div>
      <div class="flex msqrtContent"><slot @slotchange="${this.onSlotCange}"></slot></div>
    </div>
    `}updated(e){super.updated(e),this.onSlotCange()}onSlotCange(){if(this.shadowRoot){const e=this.shadowRoot.querySelector("slot");e&&setTimeout(()=>{this.drawRoot()},10)}}drawRoot(){const e=this.shadowRoot.querySelector("#msqrtGlyphSpan"),t=this.shadowRoot.querySelector("#rootPath");if(e&&t){const n=e.getBoundingClientRect(),r=n.width,o=n.height;t.setAttribute("d",`M0 ${.55*o} H${.13*r} L${.45*r} ${o-2} L${r} 0`)}}},e.MathRootElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-root")],e.MathRootElement);var We=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},$e=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathFracElement=class extends Ee{constructor(){super(...arguments),this.bevelled=!1,this.numalign="center",this.denomalign="center"}render(){let e="stroke-width: 1;",t="border-top: solid thin;";return this.linethickness&&"0"===this.linethickness.trim().charAt(0)&&(e="stroke-width: 0;",t=""),U`
    <style>
      :host {
        display: inline-block;
        vertical-align: middle;
        align-self: self-start;
        margin: 0 0.16em;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      #mfracN, #mfracD {
        font-size: 0.9em;
        --math-style-level: sub;
      }
      #mfracPanel.unbevelled {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: column;
        -webkit-flex-direction: column;
        flex-direction: column;
      }
      #mfracPanel.bevelled {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
      }
      #mfracPanel.bevelled #mfracN{
        transform: translateY(-0.3em);
      }
      #mfracPanel.bevelled #mfracD{
        transform: translateY(0.3em);
      }
      #mfracDivider.unbevelled {
        width: 100%;
        border-top: 1px solid;
      }
      #bevelledDivider {
        min-width: 6px;
        position: relative;
        margin: 0 0.2em;
      }
      #unbevelledDivider {
        width: 100%;
        height: 0;
      }
      .hidden {
        display: none !important;
      }
      svg {
        position: absolute;
        left: 0;
        right: 0;
        width: 100%;
        height: 100%;
      }
      path {
        fill: none;
        stroke: currentColor;
      }
    </style>
    <div id="mfracPanel">
      <div id="mfracN"></div>
      <div id="bevelledDivider" class="hidden">&nbsp;<svg><path id="bevelledPath" style="${e}"></path></svg></div>
      <div id="unbevelledDivider" style="${t}"></div>
      <div id="mfracD"></div>
    </div>
    <div style="display: hidden;"><slot @slotchange="${this.refreshSlot}"></slot></div>
    `}updated(e){super.updated(e),this.refreshSlot()}refreshSlot(){if(this.shadowRoot){const e=this.shadowRoot.querySelector("slot");if(e){const t=e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE);if(1<t.length){const e=this.shadowRoot.querySelector("#mfracN"),n=this.shadowRoot.querySelector("#mfracD");e.appendChild(t[0]),n.appendChild(t[1]);for(let e=2;e<t.length;e++)t[e].parentElement&&t[e].parentElement.removeChild(t[e])}this.updateBevlled()}}}updateBevlled(){const e=this.shadowRoot.querySelector("#mfracPanel"),t=this.shadowRoot.querySelector("#mfracN"),n=this.shadowRoot.querySelector("#mfracD"),r=this.shadowRoot.querySelector("#bevelledDivider"),o=this.shadowRoot.querySelector("#unbevelledDivider");t.style.textAlign=this.numalign,n.style.textAlign=this.denomalign,this.bevelled?(e.classList.remove("unbevelled"),e.classList.add("bevelled"),r.classList.remove("hidden"),o.classList.add("hidden"),setTimeout(()=>{this.drawBevelledDivider()},10)):(e.classList.remove("bevelled"),e.classList.add("unbevelled"),r.classList.add("hidden"),o.classList.remove("hidden"))}drawBevelledDivider(){const e=this.shadowRoot.querySelector("#bevelledDivider"),t=this.shadowRoot.querySelector("#bevelledPath");if(e&&t){const n=e.getBoundingClientRect(),r=n.width,o=n.height;t.setAttribute("d",`M0 ${o} L${r} 0`)}}},We([o({type:Boolean}),$e("design:type",Object)],e.MathFracElement.prototype,"bevelled",void 0),We([o({type:String}),$e("design:type",String)],e.MathFracElement.prototype,"numalign",void 0),We([o({type:String}),$e("design:type",String)],e.MathFracElement.prototype,"denomalign",void 0),We([o({type:String}),$e("design:type",String)],e.MathFracElement.prototype,"linethickness",void 0),e.MathFracElement=We([he("math-frac")],e.MathFracElement);var Je=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s};const Xe="http://www.w3.org/2000/svg";e.MathEncloseElement=class extends Ee{constructor(){super(...arguments),this.notation="longdiv"}render(){return U`
    <style>
      :host {
        display: inline-block;
        position: relative;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      svg {
        position: absolute;
        left: 0;
        top: 0;
        pointer-events: none;
      }
      ellipse, path {
        fill: none;
        stroke: currentColor;
        stroke-width: 1;
      }
    </style>
    <div id="menclosePanel"><slot @slotchange="${this.refresh}"></slot></div>
    <svg></svg>
    `}updated(e){super.updated(e),this.refresh()}refresh(){this.shadowRoot&&this.shadowRoot.querySelector("svg")&&this.shadowRoot.querySelector("slot")&&setTimeout(()=>this.redraw(),100)}adjustPadding(e,t){for(let n=0;n<t.length;n++)e[n]=d(e[n],t[n])}redraw(){const e=this.shadowRoot.querySelector("svg"),n=this.shadowRoot.querySelector("#menclosePanel"),r=this.getBoundingClientRect(),o=[0,0,0,0],a=(this.notation||"").trim().split(" ").filter(e=>!!e.trim());a.forEach(e=>{"longdiv"===e?this.adjustPadding(o,[2,0,0,12]):"actuarial"===e?this.adjustPadding(o,[2,2,0,0]):"radical"===e?this.adjustPadding(o,[2,0,0,18]):"phasorangle"===e?this.adjustPadding(o,[0,0,2,16]):"circle"===e?this.adjustPadding(o,[2,4,2,4]):this.adjustPadding(o,[1,1,1,1])}),n.style.padding=o.join("px ").trim()+"px";const d=r.width+o[1]+o[3],i=r.height+o[0]+o[2];for(e.style.width=`${d}px`,e.style.height=`${i}px`;e.firstChild;)e.removeChild(e.firstChild);n.style.borderTop=null,n.style.borderBottom=null,n.style.borderLeft=null,n.style.borderRight=null,n.style.borderRadius=null,a.forEach(r=>{var t=Math.cos,o=Math.sin,a=Math.PI,l=Math.atan;switch(r){case"longdiv":{const t=document.createElementNS(Xe,"path");t.setAttribute("d",`M0 1 H ${d} M0 1 C 8 ${.33*i} 8 ${.66*i} 0 ${i}`),e.appendChild(t);break}case"actuarial":n.style.borderRight="1px solid",n.style.borderTop="1px solid";break;case"radical":{const t=document.createElementNS(Xe,"path");t.setAttribute("d",`M0 ${.55*i} H${18*.13} L${18*.45} ${i-2} L${18} 1 L${d} 1`),e.appendChild(t);break}case"box":n.style.borderRight="1px solid",n.style.borderTop="1px solid",n.style.borderLeft="1px solid",n.style.borderBottom="1px solid";break;case"roundedbox":n.style.borderRight="1px solid",n.style.borderTop="1px solid",n.style.borderLeft="1px solid",n.style.borderBottom="1px solid",n.style.borderRadius="5px";break;case"circle":{const t=document.createElementNS(Xe,"ellipse");t.setAttribute("cx",`${d/2}`),t.setAttribute("cy",`${i/2}`),t.setAttribute("rx",`${d/2-2}`),t.setAttribute("ry",`${i/2-2}`),e.appendChild(t);break}case"left":n.style.borderLeft="1px solid";break;case"right":n.style.borderRight="1px solid";break;case"top":n.style.borderTop="1px solid";break;case"bottom":n.style.borderBottom="1px solid";break;case"madruwb":n.style.borderRight="1px solid",n.style.borderBottom="1px solid";break;case"updiagonalstrike":{const t=document.createElementNS(Xe,"path");t.setAttribute("d",`M1 ${i-1} L${d-1} ${1}`),e.appendChild(t);break}case"downdiagonalstrike":{const t=document.createElementNS(Xe,"path");t.setAttribute("d",`M1 1 L${d-1} ${i-1}`),e.appendChild(t);break}case"verticalstrike":{const t=document.createElementNS(Xe,"path");t.setAttribute("d",`M${d/2} 1 L${d/2} ${i-1}`),e.appendChild(t);break}case"horizontalstrike":{const t=document.createElementNS(Xe,"path");t.setAttribute("d",`M1 ${i/2} L${d-1} ${i/2}`),e.appendChild(t);break}case"updiagonalarrow":{const n=document.createElementNS(Xe,"path");n.setAttribute("d",`M1 ${i-1} L${d-1} ${1}`),e.appendChild(n);const r=l(i/d),s=a/2-r-a/6,p=a/6+s,h=8*o(s),c=8*t(s),u=document.createElementNS(Xe,"path");u.setAttribute("d",`M${d-1} ${1} L${d-1-h} ${1+c} l${8*-t(p)} ${8*-o(p)} Z`),u.style.fill="currentColor",e.appendChild(u);break}case"phasorangle":{const t=document.createElementNS(Xe,"path");t.setAttribute("d",`M16 1 L1 ${i-1} L${d} ${i-1}`),e.appendChild(t);break}default:}})}},Je([o({type:String}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type",Object)],e.MathEncloseElement.prototype,"notation",void 0),e.MathEncloseElement=Je([he("math-enclose")],e.MathEncloseElement);e.MathPhantomElement=class extends Ee{render(){return U`
    <style>
      :host {
        display: inline-block;
        visibility: hidden;
      }
    </style>
    <slot></slot>
    `}},e.MathPhantomElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-phantom")],e.MathPhantomElement);e.MathErrorElement=class extends Ee{render(){return U`
    <style>
      :host {
        display: inline-block;
        background: rgb(255, 255, 221);
        border: 1px solid red;
        font-weight: bold;
        font-family: sans-serif;
        font-size: 1.1em;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
    </style>
    <slot></slot>
    `}},e.MathErrorElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([he("math-error")],e.MathErrorElement);var Ye=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},Ze=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathFencedElement=class extends Ee{constructor(){super(...arguments),this.close=")",this.open="(",this.separators=","}render(){return U`
    <style>
      ${xe}
      :host {
        display: inline-block;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      #mfencedRow {
        align-items: stretch;
      }
    </style>
    <div id="mfencedRow" class="horizontal layout center"></div>
    <div style="display: hidden;">
      <slot @slotchange="${this.refreshSlot}"></slot>
    </div>
    `}updated(e){super.updated(e),this.refreshSlot()}isStretchyString(e){return!e.match(/^[0-9a-zA-Z,;\-_`'"]*$/)}nextSeparator(e){return 0<=e&&this.separators.length?e<this.separators.length?this.separators.charAt(e):this.separators.charAt(this.separators.length-1):null}refreshSlot(){if(!this.shadowRoot)return;const t=this.shadowRoot.querySelector("slot"),n=this.shadowRoot.querySelector("#mfencedRow");if(t&&n){const r=t.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE);if(r.length){for(;n.firstChild;)n.removeChild(n.firstChild);let t=0;for(let o=0;o<r.length;o++){if(0==o&&this.open){const t=new e.MathOElement;this.isStretchyString(this.open.trim())&&(t.stretchy="true"),t.textContent=this.open,n.appendChild(t)}if(n.appendChild(r[o]),o<r.length-1){const r=this.nextSeparator(t);if(r){t++;const o=new e.MathOElement;this.isStretchyString(r)&&(o.stretchy="true"),o.textContent=r,n.appendChild(o)}}if(o==r.length-1&&this.close){const t=new e.MathOElement;this.isStretchyString(this.close.trim())&&(t.stretchy="true"),t.textContent=this.close,n.appendChild(t)}}}}}},Ye([o({type:String}),Ze("design:type",Object)],e.MathFencedElement.prototype,"close",void 0),Ye([o({type:String}),Ze("design:type",Object)],e.MathFencedElement.prototype,"open",void 0),Ye([o({type:String}),Ze("design:type",Object)],e.MathFencedElement.prototype,"separators",void 0),e.MathFencedElement=Ye([he("math-fenced")],e.MathFencedElement);var Qe=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},Ke=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathPaddedElement=class extends Ee{render(){return U`
    <style>
      :host {
        display: inline-block;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
    </style>
    <div id="mpaddedPanel"><slot></slot></div>
    `}updated(e){super.updated(e),this.refresh()}refresh(){if(!this.shadowRoot)return;const e=this.shadowRoot.querySelector("#mpaddedPanel");e&&setTimeout(()=>{const t=e.getBoundingClientRect();this.height?"+"===this.height.charAt(0)?this.style.paddingTop=this.height.substring(1):"-"===this.height.charAt(0)?(this.style.height=`calc(${t.height}px - ${this.height.substring(1)})`,this.style.paddingTop="0"):(this.style.height=this.height,this.style.paddingTop="0"):(this.style.height="auto",this.style.paddingTop="0"),this.style.width=this.width?"+"===this.width.charAt(0)||"-"===this.width.charAt(0)?`calc(${t.width}px + ${this.width.substring(1)})`:this.width:"auto"},50)}},Qe([o({type:String}),Ke("design:type",String)],e.MathPaddedElement.prototype,"height",void 0),Qe([o({type:String}),Ke("design:type",String)],e.MathPaddedElement.prototype,"width",void 0),e.MathPaddedElement=Qe([he("math-padded")],e.MathPaddedElement);var et=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s};return e.MathStyleElement=class extends Ee{render(){return U`
    <style>
      :host {
        display: inline-block;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
    </style>
    <slot></slot>
    `}},et([o({type:String}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type",String)],e.MathStyleElement.prototype,"displaystyle",void 0),e.MathStyleElement=et([he("math-style")],e.MathStyleElement),e}({});
